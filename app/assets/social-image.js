jQuery(document).ready(function(a){if("undefined"!=typeof wp.media){var e,t=a("#social-image-metabox"),i=function(a){var e=t.find("#social-image-error");return"undefined"!=typeof a?e.html(a).addClass("is-active"):e.removeClass("is-active")},n=function(a){return t.find(".button").toggleClass("disabled"),t.find(".spinner").toggleClass("is-active"),i()};t.on("click","#social-image-preview",function(a){a.preventDefault();var e=t.find("#social-image-src").attr("src");if(e.length>0)return window.open(e,"_blank")}),t.on("click","#social-image-run",function(e){e.preventDefault();var s={action:"social_image_generate",post:t.data("post"),text:t.find("#social-image-text").val(),contrast:t.find("#social-image-contrast").val(),brightness:t.find("#social-image-brightness").val()},o=a.ajax({method:"POST",url:t.data("ajaxurl"),data:s},"json");return o.done(function(a){return n(!0),a.success===!1?i(a.data):(t.find("#social-image-delete").addClass("is-active"),t.find("#social-image-src").attr("src",a.data))}),n()}),t.on("click","#social-image-library",function(s){return s.preventDefault(),e?e.open():(e=wp.media({title:social_image_options.choose,multiple:!1}),e.on("select",function(){var s=e.state().get("selection").first().toJSON(),o={action:"social_image_library",post:t.data("post"),url:s.url},r=a.ajax({method:"POST",url:t.data("ajaxurl"),data:o},"json");return r.done(function(a){return n(!0),a.success===!1?i(a.data):(t.find("#social-image-delete").addClass("is-active"),t.find("#social-image-src").attr("src",a.data))}),n()}),e.open())}),t.on("click","#social-image-delete",function(e){e.preventDefault();var s={action:"social_image_delete",post:t.data("post")},o=a.ajax({method:"POST",url:t.data("ajaxurl"),data:s},"json");return o.done(function(a){return n(!0),a.success===!1?i(a.data):(t.find("#social-image-delete").removeClass("is-active"),t.find("#social-image-src").attr("src",""))}),n()})}});
!function(i){var e={root:null,breadcrumbs:function(i){var n=e.root.find(".social-image__breadcrumbs");return"undefined"!=typeof i&&i?(n.find("li:eq(1)").show(),void n.find("li:eq(2)").text(i).show()):n.find("li:first-child").nextAll().hide()},init:function(i){e.root=i,e.breadcrumbs()}};i(document).ready(function(){var n=i("#social-image-options");return!(n.length<1)&&(i(".social-image__catalog").sortable({cancel:".social-image__item--new"}),i(".social-image__catalog").disableSelection(),e.init(n))})}(jQuery);